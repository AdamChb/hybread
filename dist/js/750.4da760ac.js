"use strict";(self["webpackChunkhybread"]=self["webpackChunkhybread"]||[]).push([[750],{2347:function(o,t,e){e.d(t,{A:function(){return g}});var r=e(6768),n=e(4232),a=e(5130),i=e(5945),s=e(4517);const c={class:"book"},l={class:"img"},u=["src"],k={class:"author"},d={class:"likes"};function E(o,t,e,E,p,_){return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",{onClick:t[0]||(t[0]=o=>_.goTo(e.book.Id_Book))},[(0,r.Lk)("div",l,[(0,r.Lk)("img",{src:"data:image/jpeg;base64,"+e.book.Cover_Book,alt:"book cover"},null,8,u)]),(0,r.Lk)("h3",null,(0,n.v_)(e.book.Name_Book),1),(0,r.Lk)("p",k,"by "+(0,n.v_)(e.book.Author),1)]),(0,r.Lk)("div",d,[(0,r.bo)((0,r.Lk)("img",{onClick:t[1]||(t[1]=o=>_.toLike(e.book)),src:i,alt:"like icon"},null,512),[[a.aG,!e.book.Has_Liked]]),(0,r.bo)((0,r.Lk)("img",{onClick:t[2]||(t[2]=o=>_.unLike(e.book)),src:s,alt:"like icon"},null,512),[[a.aG,e.book.Has_Liked]]),(0,r.eW)(" "+(0,n.v_)(e.book.Total_Likes),1)])])}e(4114);var p={name:"BookCard",props:{book:Object,isLoggedIn:Boolean},methods:{async toLike(o){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");o.Has_Liked=!o.Has_Liked,o.Total_Likes+=1;const t=await fetch("http://localhost:3000/api/auth/likebook",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:o.Id_Book})});t.ok||(o.Has_Liked=!o.Has_Liked,o.Total_Likes-=1)},async unLike(o){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");o.Has_Liked=!o.Has_Liked,o.Total_Likes-=1;const t=await fetch("http://localhost:3000/api/auth/unlikeBook",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:o.Id_Book})});t.ok||(o.Has_Liked=!o.Has_Liked,o.Total_Likes+=1)},goTo(o){this.$router.push({name:"BookView",query:{id:o}})}}},_=e(1241);const h=(0,_.A)(p,[["render",E],["__scopeId","data-v-65e209ca"]]);var g=h},6369:function(o,t,e){e.r(t),e.d(t,{default:function(){return b}});var r=e(6768),n=e(5130),a=e(4232);const i={class:"background"},s={class:"container1"},c={class:"container3"},l={class:"filter"},u={class:"labels"},k=["value"],d={key:0,class:"addBook"},E={class:"shelf"},p={key:0};function _(o,t,e,_,h,g){const f=(0,r.g2)("router-link"),y=(0,r.g2)("BookCard");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",s,[t[5]||(t[5]=(0,r.Lk)("h1",null,"Search your next read.",-1)),(0,r.Lk)("div",c,[(0,r.Lk)("div",l,[t[2]||(t[2]=(0,r.Lk)("h3",null,"Category",-1)),(0,r.Lk)("div",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(h.categories,(o=>((0,r.uX)(),(0,r.CE)("label",{key:o.ID_Category},[(0,r.bo)((0,r.Lk)("input",{type:"radio",name:"category",value:o.ID_Category,"onUpdate:modelValue":t[0]||(t[0]=o=>h.selectedCategory=o)},null,8,k),[[n.XL,h.selectedCategory]]),(0,r.eW)(" "+(0,a.v_)(o.Name_Category),1)])))),128))]),t[3]||(t[3]=(0,r.Lk)("h3",null,"Minimal Quantity",-1)),(0,r.bo)((0,r.Lk)("input",{type:"range",min:"0",max:"50","onUpdate:modelValue":t[1]||(t[1]=o=>h.quantity=o)},null,512),[[n.Jo,h.quantity]]),(0,r.Lk)("p",null,(0,a.v_)(h.quantity),1),(0,r.bF)(f,{to:"/addbook"},{default:(0,r.k6)((()=>[e.isLoggedIn?((0,r.uX)(),(0,r.CE)("button",d,"Add a book")):(0,r.Q3)("",!0)])),_:1})]),(0,r.Lk)("div",E,[0===h.books.length?((0,r.uX)(),(0,r.CE)("div",p,t[4]||(t[4]=[(0,r.Lk)("h2",null,"No books found",-1)]))):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(h.books,(o=>((0,r.uX)(),(0,r.CE)("div",{key:o.id},[(0,r.bF)(y,{book:o,isLoggedIn:e.isLoggedIn},null,8,["book","isLoggedIn"])])))),128))])])])])}e(4114),e(4979);var h=e(2347),g={name:"HomePage",components:{BookCard:h.A},props:{isLoggedIn:Boolean},data(){return{quantity:0,books:[],categories:[],selectedCategory:"",fetchIteration:0}},async beforeMount(){await this.fetchCategories(),await this.fetchBooks()},watch:{"$route.query.search":"fetchBooks",selectedCategory:"fetchBooks",quantity:"fetchBooks"},methods:{async fetchCategories(){const o=await fetch("http://localhost:3000/api/category/getcategories"),t=await o.json();this.categories=t},async fetchBooks(){this.fetchIteration++;let o=this.fetchIteration;const t=localStorage.getItem("token");let e;e=t?JSON.parse(atob(t.split(".")[1])):{id:0};const r=this.$route.query.search;let n=`http://localhost:3000/api/books/search?quantity=${this.quantity}`;r&&(n+=`&query=${r}`),this.selectedCategory&&(n+=`&category=${this.selectedCategory}`);try{const t=await fetch(n),r=await t.json();if(0===r.length)this.books=[];else{this.books=[];for(const t of r){if(o!==this.fetchIteration)return;const r=await fetch(`http://localhost:3000/api/books/book/${e.id}/${t.Id_Book}`),n=await r.json();this.books.push(n[0])}}}catch(a){console.error(a)}}}},f=e(1241);const y=(0,f.A)(g,[["render",_],["__scopeId","data-v-29a11eaa"]]);var b=y},4517:function(o,t,e){o.exports=e.p+"img/liked.85142ccf.svg"},5945:function(o,t,e){o.exports=e.p+"img/not-liked.2d13e4f7.svg"},3506:function(o,t,e){var r=e(3925),n=String,a=TypeError;o.exports=function(o){if(r(o))return o;throw new a("Can't set "+n(o)+" as a prototype")}},679:function(o,t,e){var r=e(1625),n=TypeError;o.exports=function(o,t){if(r(t,o))return o;throw new n("Incorrect invocation")}},6955:function(o,t,e){var r=e(2140),n=e(4901),a=e(2195),i=e(8227),s=i("toStringTag"),c=Object,l="Arguments"===a(function(){return arguments}()),u=function(o,t){try{return o[t]}catch(e){}};o.exports=r?a:function(o){var t,e,r;return void 0===o?"Undefined":null===o?"Null":"string"==typeof(e=u(t=c(o),s))?e:l?a(t):"Object"===(r=a(t))&&n(t.callee)?"Arguments":r}},5002:function(o){o.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6193:function(o,t,e){var r=e(9504),n=Error,a=r("".replace),i=function(o){return String(new n(o).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(i);o.exports=function(o,t){if(c&&"string"==typeof o&&!n.prepareStackTrace)while(t--)o=a(o,s,"");return o}},3167:function(o,t,e){var r=e(4901),n=e(34),a=e(2967);o.exports=function(o,t,e){var i,s;return a&&r(i=t.constructor)&&i!==e&&n(s=i.prototype)&&s!==e.prototype&&a(o,s),o}},3925:function(o,t,e){var r=e(34);o.exports=function(o){return r(o)||null===o}},2603:function(o,t,e){var r=e(655);o.exports=function(o,t){return void 0===o?arguments.length<2?"":t:r(o)}},2967:function(o,t,e){var r=e(6706),n=e(34),a=e(7750),i=e(3506);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,e={};try{o=r(Object.prototype,"__proto__","set"),o(e,[]),t=e instanceof Array}catch(s){}return function(e,r){return a(e),i(r),n(e)?(t?o(e,r):e.__proto__=r,e):e}}():void 0)},2140:function(o,t,e){var r=e(8227),n=r("toStringTag"),a={};a[n]="z",o.exports="[object z]"===String(a)},655:function(o,t,e){var r=e(6955),n=String;o.exports=function(o){if("Symbol"===r(o))throw new TypeError("Cannot convert a Symbol value to a string");return n(o)}},4979:function(o,t,e){var r=e(6518),n=e(4576),a=e(7751),i=e(6980),s=e(4913).f,c=e(9297),l=e(679),u=e(3167),k=e(2603),d=e(5002),E=e(6193),p=e(3724),_=e(6395),h="DOMException",g=a("Error"),f=a(h),y=function(){l(this,b);var o=arguments.length,t=k(o<1?void 0:arguments[0]),e=k(o<2?void 0:arguments[1],"Error"),r=new f(t,e),n=new g(t);return n.name=h,s(r,"stack",i(1,E(n.stack,1))),u(r,this,y),r},b=y.prototype=f.prototype,R="stack"in new g(h),v="stack"in new f(1,2),I=f&&p&&Object.getOwnPropertyDescriptor(n,h),m=!!I&&!(I.writable&&I.configurable),L=R&&!m&&!v;r({global:!0,constructor:!0,forced:_||L},{DOMException:L?y:f});var C=a(h),T=C.prototype;if(T.constructor!==C)for(var A in _||s(T,"constructor",i(1,C)),d)if(c(d,A)){var S=d[A],N=S.s;c(C,N)||s(C,N,i(6,S.c))}}}]);
//# sourceMappingURL=750.4da760ac.js.map