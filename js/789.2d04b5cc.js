"use strict";(self["webpackChunkhybread"]=self["webpackChunkhybread"]||[]).push([[789],{1789:function(e,a,o){o.r(a),o.d(a,{default:function(){return m}});var t=o(6768),s=o(5130),l=o(4232);const i={class:"background"},n={id:"content"},r={id:"form"},d={id:"signup"};function u(e,a,o,u,p,c){const g=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("div",n,[(0,t.Lk)("div",r,[a[7]||(a[7]=(0,t.Lk)("h1",{id:"title"},"Log In",-1)),(0,t.Lk)("form",null,[a[5]||(a[5]=(0,t.Lk)("label",{for:"email",class:"subject"},"Email",-1)),(0,t.bo)((0,t.Lk)("input",{class:"input",type:"email",id:"email",name:"email",placeholder:"ex : pineapplelover@hybread.com","onUpdate:modelValue":a[0]||(a[0]=e=>p.email=e),required:""},null,512),[[s.Jo,p.email]]),a[6]||(a[6]=(0,t.Lk)("label",{for:"password",class:"subject"},"Password",-1)),(0,t.bo)((0,t.Lk)("input",{class:"input",type:"password",id:"password",name:"password","onUpdate:modelValue":a[1]||(a[1]=e=>p.password=e),placeholder:"ex : PiNeApPlE4l!fe",required:""},null,512),[[s.Jo,p.password]]),(0,t.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>c.login&&c.login(...e)),id:"submit",class:"button"},"Log in"),(0,t.Lk)("p",null,(0,l.v_)(p.message),1),(0,t.Lk)("p",d,[a[4]||(a[4]=(0,t.eW)(" You don't have an account yet? ")),(0,t.bF)(g,{to:"/signIn"},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("Register now")]))),_:1})])])])])])}o(4114);var p={data(){return{email:"",password:"",message:""}},beforeRouteEnter(e,a,o){a.path&&localStorage.setItem("previousPage",a.path),o()},methods:{async login(e){e.preventDefault();const a=await fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})}),o=await a.json();if(a.ok){localStorage.setItem("token",o.token),this.message="Login successful",this.$emit("loggedInUpdate");const e="/"===localStorage.getItem("previousPage")||"/book"===localStorage.getItem("previousPage")||"/signup"===localStorage.getItem("previousPage")?"/homepageloggedin":localStorage.getItem("previousPage");this.$router.push(e)}else this.message="Login failed"}}},c=o(1241);const g=(0,c.A)(p,[["render",u],["__scopeId","data-v-eb861e32"]]);var m=g}}]);
//# sourceMappingURL=789.2d04b5cc.js.map