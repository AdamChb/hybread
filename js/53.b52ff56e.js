"use strict";(self["webpackChunkhybread"]=self["webpackChunkhybread"]||[]).push([[53],{2347:function(o,t,r){r.d(t,{A:function(){return R}});var e=r(6768),n=r(4232),i=r(5130),a=r(5945),s=r(4517);const c={class:"book"},l={class:"img"},u=["src"],k={class:"author"},d={class:"likes"};function E(o,t,r,E,_,p){return(0,e.uX)(),(0,e.CE)("div",c,[(0,e.Lk)("div",{onClick:t[0]||(t[0]=o=>p.goTo(r.book.Id_Book))},[(0,e.Lk)("div",l,[(0,e.Lk)("img",{src:"data:image/jpeg;base64,"+r.book.Cover_Book,alt:"book cover"},null,8,u)]),(0,e.Lk)("h3",null,(0,n.v_)(r.book.Name_Book),1),(0,e.Lk)("p",k,"by "+(0,n.v_)(r.book.Author),1)]),(0,e.Lk)("div",d,[(0,e.bo)((0,e.Lk)("img",{onClick:t[1]||(t[1]=o=>p.toLike(r.book)),src:a,alt:"like icon"},null,512),[[i.aG,!r.book.Has_Liked]]),(0,e.bo)((0,e.Lk)("img",{onClick:t[2]||(t[2]=o=>p.unLike(r.book)),src:s,alt:"like icon"},null,512),[[i.aG,r.book.Has_Liked]]),(0,e.eW)(" "+(0,n.v_)(r.book.Total_Likes),1)])])}r(4114);var _={name:"BookCard",props:{book:Object,isLoggedIn:Boolean},methods:{async toLike(o){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");o.Has_Liked=!o.Has_Liked,o.Total_Likes+=1;const t=await fetch("http://localhost:3000/api/auth/likebook",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:o.Id_Book})});t.ok||(o.Has_Liked=!o.Has_Liked,o.Total_Likes-=1)},async unLike(o){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");o.Has_Liked=!o.Has_Liked,o.Total_Likes-=1;const t=await fetch("http://localhost:3000/api/auth/unlikeBook",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:o.Id_Book})});t.ok||(o.Has_Liked=!o.Has_Liked,o.Total_Likes+=1)},goTo(o){this.$router.push({name:"BookView",query:{id:o}})}}},p=r(1241);const f=(0,p.A)(_,[["render",E],["__scopeId","data-v-65e209ca"]]);var R=f},1053:function(o,t,r){r.r(t),r.d(t,{default:function(){return E}});var e=r(6768);const n={class:"background"},i={class:"container1"},a={class:"container2"},s={class:"shelf"};function c(o,t,r,c,l,u){const k=(0,e.g2)("router-link"),d=(0,e.g2)("BookCard");return(0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",n,[(0,e.Lk)("div",i,[t[1]||(t[1]=(0,e.Lk)("h1",null,"You love books ?",-1)),t[2]||(t[2]=(0,e.Lk)("h1",null,"You will love HybRead.",-1)),t[3]||(t[3]=(0,e.Lk)("p",{class:"description"},[(0,e.eW)(" HybRead is a brand new solution to save any book you love to your favorites. "),(0,e.Lk)("br"),(0,e.eW)("Join us now to discover our collection and save your favorite books ! ")],-1)),(0,e.bF)(k,{to:"/signIn"},{default:(0,e.k6)((()=>t[0]||(t[0]=[(0,e.Lk)("div",{class:"cta-button"},"Join us now",-1)]))),_:1})])]),(0,e.Lk)("div",a,[t[4]||(t[4]=(0,e.Lk)("h2",null,"Most liked books",-1)),(0,e.Lk)("div",s,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(l.books,(o=>((0,e.uX)(),(0,e.CE)("div",{key:o.id},[(0,e.bF)(d,{book:o,isLoggedIn:r.isLoggedIn},null,8,["book","isLoggedIn"])])))),128))])])],64)}r(4114),r(4979);var l=r(2347),u={name:"HomePage",components:{BookCard:l.A},props:{isLoggedIn:Boolean},data(){return{books:[]}},async mounted(){const o=localStorage.getItem("token");let t;t=o?JSON.parse(atob(o.split(".")[1])):{id:0};const r=await fetch("http://localhost:3000/api/books/top"),e=await r.json(),n=e;console.log(n),n.forEach((async o=>{console.log(o);const r=await fetch(`http://localhost:3000/api/books/book/${t.id}/${o.Id_Book}`),e=await r.json();this.books.push(e[0]),console.log(e)}))}},k=r(1241);const d=(0,k.A)(u,[["render",c],["__scopeId","data-v-580adc3e"]]);var E=d},4517:function(o,t,r){o.exports=r.p+"img/liked.85142ccf.svg"},5945:function(o,t,r){o.exports=r.p+"img/not-liked.2d13e4f7.svg"},3506:function(o,t,r){var e=r(3925),n=String,i=TypeError;o.exports=function(o){if(e(o))return o;throw new i("Can't set "+n(o)+" as a prototype")}},679:function(o,t,r){var e=r(1625),n=TypeError;o.exports=function(o,t){if(e(t,o))return o;throw new n("Incorrect invocation")}},6955:function(o,t,r){var e=r(2140),n=r(4901),i=r(2195),a=r(8227),s=a("toStringTag"),c=Object,l="Arguments"===i(function(){return arguments}()),u=function(o,t){try{return o[t]}catch(r){}};o.exports=e?i:function(o){var t,r,e;return void 0===o?"Undefined":null===o?"Null":"string"==typeof(r=u(t=c(o),s))?r:l?i(t):"Object"===(e=i(t))&&n(t.callee)?"Arguments":e}},5002:function(o){o.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6193:function(o,t,r){var e=r(9504),n=Error,i=e("".replace),a=function(o){return String(new n(o).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);o.exports=function(o,t){if(c&&"string"==typeof o&&!n.prepareStackTrace)while(t--)o=i(o,s,"");return o}},3167:function(o,t,r){var e=r(4901),n=r(34),i=r(2967);o.exports=function(o,t,r){var a,s;return i&&e(a=t.constructor)&&a!==r&&n(s=a.prototype)&&s!==r.prototype&&i(o,s),o}},3925:function(o,t,r){var e=r(34);o.exports=function(o){return e(o)||null===o}},2603:function(o,t,r){var e=r(655);o.exports=function(o,t){return void 0===o?arguments.length<2?"":t:e(o)}},2967:function(o,t,r){var e=r(6706),n=r(34),i=r(7750),a=r(3506);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,r={};try{o=e(Object.prototype,"__proto__","set"),o(r,[]),t=r instanceof Array}catch(s){}return function(r,e){return i(r),a(e),n(r)?(t?o(r,e):r.__proto__=e,r):r}}():void 0)},2140:function(o,t,r){var e=r(8227),n=e("toStringTag"),i={};i[n]="z",o.exports="[object z]"===String(i)},655:function(o,t,r){var e=r(6955),n=String;o.exports=function(o){if("Symbol"===e(o))throw new TypeError("Cannot convert a Symbol value to a string");return n(o)}},4979:function(o,t,r){var e=r(6518),n=r(4576),i=r(7751),a=r(6980),s=r(4913).f,c=r(9297),l=r(679),u=r(3167),k=r(2603),d=r(5002),E=r(6193),_=r(3724),p=r(6395),f="DOMException",R=i("Error"),g=i(f),v=function(){l(this,b);var o=arguments.length,t=k(o<1?void 0:arguments[0]),r=k(o<2?void 0:arguments[1],"Error"),e=new g(t,r),n=new R(t);return n.name=f,s(e,"stack",a(1,E(n.stack,1))),u(e,this,v),e},b=v.prototype=g.prototype,L="stack"in new R(f),I="stack"in new g(1,2),m=g&&_&&Object.getOwnPropertyDescriptor(n,f),h=!!m&&!(m.writable&&m.configurable),T=L&&!h&&!I;e({global:!0,constructor:!0,forced:p||T},{DOMException:T?v:g});var y=i(f),A=y.prototype;if(A.constructor!==y)for(var O in p||s(A,"constructor",a(1,y)),d)if(c(d,O)){var S=d[O],N=S.s;c(y,N)||s(y,N,a(6,S.c))}}}]);
//# sourceMappingURL=53.b52ff56e.js.map