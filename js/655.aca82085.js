"use strict";(self["webpackChunkhybread"]=self["webpackChunkhybread"]||[]).push([[655],{2347:function(o,t,r){r.d(t,{A:function(){return h}});var e=r(6768),n=r(4232),a=r(5130),i=r(5945),s=r(4517);const c={class:"book"},u={class:"img"},d=["src"],l={class:"author"},k={class:"likes"};function E(o,t,r,E,p,_){return(0,e.uX)(),(0,e.CE)("div",c,[(0,e.Lk)("div",{onClick:t[0]||(t[0]=o=>_.goTo(r.book.Id_Book))},[(0,e.Lk)("div",u,[(0,e.Lk)("img",{src:"data:image/jpeg;base64,"+r.book.Cover_Book,alt:"book cover"},null,8,d)]),(0,e.Lk)("h3",null,(0,n.v_)(r.book.Name_Book),1),(0,e.Lk)("p",l,"by "+(0,n.v_)(r.book.Author),1)]),(0,e.Lk)("div",k,[(0,e.bo)((0,e.Lk)("img",{onClick:t[1]||(t[1]=o=>_.toLike(r.book)),src:i,alt:"like icon"},null,512),[[a.aG,!r.book.Has_Liked]]),(0,e.bo)((0,e.Lk)("img",{onClick:t[2]||(t[2]=o=>_.unLike(r.book)),src:s,alt:"like icon"},null,512),[[a.aG,r.book.Has_Liked]]),(0,e.eW)(" "+(0,n.v_)(r.book.Total_Likes),1)])])}r(4114);var p={name:"BookCard",props:{book:Object,isLoggedIn:Boolean},methods:{async toLike(o){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");o.Has_Liked=!o.Has_Liked,o.Total_Likes+=1;const t=await fetch("http://localhost:3000/api/auth/likebook",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:o.Id_Book})});t.ok||(o.Has_Liked=!o.Has_Liked,o.Total_Likes-=1)},async unLike(o){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");o.Has_Liked=!o.Has_Liked,o.Total_Likes-=1;const t=await fetch("http://localhost:3000/api/auth/unlikeBook",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:o.Id_Book})});t.ok||(o.Has_Liked=!o.Has_Liked,o.Total_Likes+=1)},goTo(o){this.$router.push({name:"BookView",query:{id:o}})}}},_=r(1241);const g=(0,_.A)(p,[["render",E],["__scopeId","data-v-65e209ca"]]);var h=g},7655:function(o,t,r){r.r(t),r.d(t,{default:function(){return E}});var e=r(6768),n=r(4232);const a={id:"category"},i={class:"container"},s={class:"shelf"};function c(o,t,r,c,u,d){const l=(0,e.g2)("BookCard");return(0,e.uX)(),(0,e.CE)("div",a,[(0,e.Lk)("div",i,[(0,e.Lk)("h1",null,(0,n.v_)(u.category.Name_Category),1),(0,e.Lk)("div",s,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(u.books,(o=>((0,e.uX)(),(0,e.CE)("div",{key:o.id},[(0,e.bF)(l,{book:o,isLoggedIn:r.isLoggedIn},null,8,["book","isLoggedIn"])])))),128))])])])}r(4114),r(4979);var u=r(2347),d={name:"CategoryPage",components:{BookCard:u.A},props:{isLoggedIn:Boolean},data(){return{books:[],category:{}}},methods:{async getBooks(){this.book=[];const o=localStorage.getItem("token");let t;t=o?JSON.parse(atob(o.split(".")[1])):{id:0};const r=this.$route.query.id,e=await fetch(`http://localhost:3000/api/category/getcategory/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await e.json();this.category=n[0];const a=await fetch(`http://localhost:3000/api/books/category/${this.category.ID_Category}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await a.json();this.booksId=i,this.booksId.forEach((async o=>{const r=await fetch(`http://localhost:3000/api/books/book/${t.id}/${o.Id_Book}`,{method:"GET",headers:{"Content-Type":"application/json"}}),e=await r.json();o=e[0],this.books.push(o),console.log(o)}))}},watch:{"$route.query.id":{handler:async function(){await this.getBooks()},immediate:!0}}},l=r(1241);const k=(0,l.A)(d,[["render",c],["__scopeId","data-v-7ec3eaa4"]]);var E=k},4517:function(o,t,r){o.exports=r.p+"img/liked.85142ccf.svg"},5945:function(o,t,r){o.exports=r.p+"img/not-liked.2d13e4f7.svg"},3506:function(o,t,r){var e=r(3925),n=String,a=TypeError;o.exports=function(o){if(e(o))return o;throw new a("Can't set "+n(o)+" as a prototype")}},679:function(o,t,r){var e=r(1625),n=TypeError;o.exports=function(o,t){if(e(t,o))return o;throw new n("Incorrect invocation")}},6955:function(o,t,r){var e=r(2140),n=r(4901),a=r(2195),i=r(8227),s=i("toStringTag"),c=Object,u="Arguments"===a(function(){return arguments}()),d=function(o,t){try{return o[t]}catch(r){}};o.exports=e?a:function(o){var t,r,e;return void 0===o?"Undefined":null===o?"Null":"string"==typeof(r=d(t=c(o),s))?r:u?a(t):"Object"===(e=a(t))&&n(t.callee)?"Arguments":e}},5002:function(o){o.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6193:function(o,t,r){var e=r(9504),n=Error,a=e("".replace),i=function(o){return String(new n(o).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(i);o.exports=function(o,t){if(c&&"string"==typeof o&&!n.prepareStackTrace)while(t--)o=a(o,s,"");return o}},3167:function(o,t,r){var e=r(4901),n=r(34),a=r(2967);o.exports=function(o,t,r){var i,s;return a&&e(i=t.constructor)&&i!==r&&n(s=i.prototype)&&s!==r.prototype&&a(o,s),o}},3925:function(o,t,r){var e=r(34);o.exports=function(o){return e(o)||null===o}},2603:function(o,t,r){var e=r(655);o.exports=function(o,t){return void 0===o?arguments.length<2?"":t:e(o)}},2967:function(o,t,r){var e=r(6706),n=r(34),a=r(7750),i=r(3506);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,r={};try{o=e(Object.prototype,"__proto__","set"),o(r,[]),t=r instanceof Array}catch(s){}return function(r,e){return a(r),i(e),n(r)?(t?o(r,e):r.__proto__=e,r):r}}():void 0)},2140:function(o,t,r){var e=r(8227),n=e("toStringTag"),a={};a[n]="z",o.exports="[object z]"===String(a)},655:function(o,t,r){var e=r(6955),n=String;o.exports=function(o){if("Symbol"===e(o))throw new TypeError("Cannot convert a Symbol value to a string");return n(o)}},4979:function(o,t,r){var e=r(6518),n=r(4576),a=r(7751),i=r(6980),s=r(4913).f,c=r(9297),u=r(679),d=r(3167),l=r(2603),k=r(5002),E=r(6193),p=r(3724),_=r(6395),g="DOMException",h=a("Error"),f=a(g),R=function(){u(this,m);var o=arguments.length,t=l(o<1?void 0:arguments[0]),r=l(o<2?void 0:arguments[1],"Error"),e=new f(t,r),n=new h(t);return n.name=g,s(e,"stack",i(1,E(n.stack,1))),d(e,this,R),e},m=R.prototype=f.prototype,I="stack"in new h(g),v="stack"in new f(1,2),y=f&&p&&Object.getOwnPropertyDescriptor(n,g),b=!!y&&!(y.writable&&y.configurable),T=I&&!b&&!v;e({global:!0,constructor:!0,forced:_||T},{DOMException:T?R:f});var L=a(g),A=L.prototype;if(A.constructor!==L)for(var C in _||s(A,"constructor",i(1,L)),k)if(c(k,C)){var O=k[C],S=O.s;c(L,S)||s(L,S,i(6,O.c))}}}]);
//# sourceMappingURL=655.aca82085.js.map