"use strict";(self["webpackChunkhybread"]=self["webpackChunkhybread"]||[]).push([[414],{3414:function(o,t,e){e.r(t),e.d(t,{default:function(){return $}});var r=e(6768),n=e(4232),a=e(5130),i=e(5983),c=e(5945),s=e(4517);const l={class:"background"},u={id:"book-view"},k={class:"bb-container"},d={class:"buttons"},p={key:0,class:"admin-button"},v={class:"book-container"},h={class:"book-image"},m=["src"],E={key:0,class:"book-info"},_={class:"book-header"},b={class:"text"},g={class:"author"},f={class:"genre"},L={class:"likes"},y={class:"book-details"},S={class:"text"},R={class:"book-description"},I={key:1,class:"book-info"},T={class:"book-header"},N=["value"],A={class:"text"},C={class:"author"},O=["value"],B={class:"genre"},D=["value"],x={class:"book-details"},w={class:"text"},M=["value"],H=["value"],j={class:"book-description"},U=["value"];function W(o,t,e,W,q,z){const P=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",u,[(0,r.Lk)("div",k,[(0,r.Lk)("div",d,[(0,r.bF)(P,{to:"/homepageloggedin",style:{"text-decoration":"none"}},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("div",{class:"cta-button"},[(0,r.Lk)("img",{src:i,alt:"arrow icon"}),(0,r.eW)(" Return ")],-1)]))),_:1}),q.isAdmin?((0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("button",{class:"cta-button",onClick:t[0]||(t[0]=(...o)=>z.deleteBook&&z.deleteBook(...o))},"Delete Book"),(0,r.Lk)("button",{class:"cta-button",onClick:t[1]||(t[1]=(...o)=>z.changeBook&&z.changeBook(...o))},"Modify Book")])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",v,[(0,r.Lk)("div",h,[(0,r.Lk)("img",{src:"data:image/jpeg;base64,"+q.book.Cover_Book,alt:"Book Cover"},null,8,m)]),q.isAdmin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",E,[(0,r.Lk)("div",_,[(0,r.Lk)("h2",null,(0,n.v_)(q.book.Name_Book),1),(0,r.Lk)("div",b,[(0,r.Lk)("div",g,"from "+(0,n.v_)(q.book.Author),1),(0,r.Lk)("div",f,"Genre : "+(0,n.v_)(q.book.Name_Category),1)])]),(0,r.Lk)("div",L,[(0,r.bo)((0,r.Lk)("img",{onClick:t[2]||(t[2]=o=>z.toLike()),src:c,alt:"like icon"},null,512),[[a.aG,!q.book.Has_Liked]]),(0,r.bo)((0,r.Lk)("img",{onClick:t[3]||(t[3]=o=>z.unLike()),src:s,alt:"like icon"},null,512),[[a.aG,q.book.Has_Liked]]),(0,r.eW)(" "+(0,n.v_)(q.book.Total_Likes),1)]),(0,r.Lk)("div",y,[(0,r.Lk)("div",S,[(0,r.Lk)("p",null,[(0,r.eW)("Quantity available : "+(0,n.v_)(q.book.Stock),1),t[5]||(t[5]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)("ISBN : "+(0,n.v_)(q.book.ISBN),1)])]),(0,r.Lk)("p",R,(0,n.v_)(q.book.Summary),1)])])),q.isAdmin?((0,r.uX)(),(0,r.CE)("div",I,[(0,r.Lk)("div",T,[(0,r.Lk)("h2",null,[(0,r.Lk)("input",{id:"Name_Book",type:"text",value:q.book.Name_Book,placeholder:"Enter book name"},null,8,N)]),(0,r.Lk)("div",A,[(0,r.Lk)("div",C,[t[6]||(t[6]=(0,r.eW)(" from ")),(0,r.Lk)("input",{id:"Author",type:"text",value:q.book.Author,placeholder:"Enter author's name"},null,8,O)]),(0,r.Lk)("div",B,[t[8]||(t[8]=(0,r.eW)(" Genre : ")),(0,r.Lk)("select",{name:"category",id:"genre",value:q.book.ID_Category},t[7]||(t[7]=[(0,r.Fv)('<option value="1" data-v-47afc8ec>Children&#39;s books</option><option value="2" data-v-47afc8ec>Science fiction</option><option value="3" data-v-47afc8ec>Mercedes</option><option value="4" data-v-47afc8ec>Thriller</option><option value="5" data-v-47afc8ec>Educational</option>',5)]),8,D)])])]),(0,r.Lk)("div",x,[(0,r.Lk)("div",w,[(0,r.Lk)("p",null,[t[9]||(t[9]=(0,r.eW)(" Quantity available : ")),(0,r.Lk)("input",{id:"Stock",type:"number",value:q.book.Stock,placeholder:"Enter quantity"},null,8,M),t[10]||(t[10]=(0,r.Lk)("br",null,null,-1)),t[11]||(t[11]=(0,r.eW)(" ISBN : ")),(0,r.Lk)("input",{id:"ISBN",type:"text",value:q.book.ISBN,placeholder:"Enter ISBN"},null,8,H)])]),(0,r.Lk)("p",j,[(0,r.Lk)("textarea",{id:"Summary",value:q.book.Summary,placeholder:"Enter book summary"},null,8,U)])])])):(0,r.Q3)("",!0)])])])])}e(4114),e(4979);var q={name:"BookCard",props:{isLoggedIn:Boolean},data(){return{book:{ID_Book:0,Name_Book:"",Author_Book:"",ID_Category:0,Stock:0,ISBN:"",Summary:"",Cover_Book:"",Has_Liked:!1,Total_Likes:0,Name_Category:""},isAdmin:!1}},async beforeMount(){const o=localStorage.getItem("token");let t;t=o?JSON.parse(atob(o.split(".")[1])):{id:0},this.isAdmin=t.admin;const e=this.$route.query.id,r=await fetch(`http://localhost:3000/api/books/book/${t.id}/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await r.json();this.book=n[0],console.log(this.book)},methods:{async deleteBook(){const o=this.$route.query.id,t=await fetch(`http://localhost:3000/api/admin/deletebook/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});t.ok&&this.$router.push("/homepageloggedin")},async changeBook(){const o=this.$route.query.id,t=await fetch(`http://localhost:3000/api/admin/modifybook/${o}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({ID_Book:this.book.ID_Book,Name_Book:document.querySelector("input[id=Name_Book]").value,Author:document.querySelector("input[id=Author]").value,ID_Category:document.querySelector("select[id=genre]").value,Stock:Number(document.querySelector("input[id=Stock]").value),ISBN:document.querySelector("input[id=ISBN]").value,Summary:document.querySelector("textarea[id=Summary]").value})});t.ok&&this.$router.push("/homepageloggedin")},async toLike(){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");this.book.Has_Liked=!this.book.Has_Liked,this.book.Total_Likes+=1;const o=await fetch("http://localhost:3000/api/auth/likebook",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:this.book.Id_Book})});o.ok||(this.book.Has_Liked=!this.book.Has_Liked,this.book.Total_Likes-=1)},async unLike(){if(!this.isLoggedIn)return void alert("You need to be logged in to like a recipe!");this.book.Has_Liked=!this.book.Has_Liked,this.book.Total_Likes-=1;const o=await fetch("http://localhost:3000/api/auth/unlikeBook",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({bookId:this.book.Id_Book})});o.ok||(this.book.Has_Liked=!this.book.Has_Liked,this.book.Total_Likes+=1)}}},z=e(1241);const P=(0,z.A)(q,[["render",W],["__scopeId","data-v-47afc8ec"]]);var $=P},5983:function(o,t,e){o.exports=e.p+"img/back-arrow.bc2661c8.svg"},4517:function(o,t,e){o.exports=e.p+"img/liked.85142ccf.svg"},5945:function(o,t,e){o.exports=e.p+"img/not-liked.2d13e4f7.svg"},3506:function(o,t,e){var r=e(3925),n=String,a=TypeError;o.exports=function(o){if(r(o))return o;throw new a("Can't set "+n(o)+" as a prototype")}},679:function(o,t,e){var r=e(1625),n=TypeError;o.exports=function(o,t){if(r(t,o))return o;throw new n("Incorrect invocation")}},6955:function(o,t,e){var r=e(2140),n=e(4901),a=e(2195),i=e(8227),c=i("toStringTag"),s=Object,l="Arguments"===a(function(){return arguments}()),u=function(o,t){try{return o[t]}catch(e){}};o.exports=r?a:function(o){var t,e,r;return void 0===o?"Undefined":null===o?"Null":"string"==typeof(e=u(t=s(o),c))?e:l?a(t):"Object"===(r=a(t))&&n(t.callee)?"Arguments":r}},5002:function(o){o.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6193:function(o,t,e){var r=e(9504),n=Error,a=r("".replace),i=function(o){return String(new n(o).stack)}("zxcasd"),c=/\n\s*at [^:]*:[^\n]*/,s=c.test(i);o.exports=function(o,t){if(s&&"string"==typeof o&&!n.prepareStackTrace)while(t--)o=a(o,c,"");return o}},3167:function(o,t,e){var r=e(4901),n=e(34),a=e(2967);o.exports=function(o,t,e){var i,c;return a&&r(i=t.constructor)&&i!==e&&n(c=i.prototype)&&c!==e.prototype&&a(o,c),o}},3925:function(o,t,e){var r=e(34);o.exports=function(o){return r(o)||null===o}},2603:function(o,t,e){var r=e(655);o.exports=function(o,t){return void 0===o?arguments.length<2?"":t:r(o)}},2967:function(o,t,e){var r=e(6706),n=e(34),a=e(7750),i=e(3506);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,e={};try{o=r(Object.prototype,"__proto__","set"),o(e,[]),t=e instanceof Array}catch(c){}return function(e,r){return a(e),i(r),n(e)?(t?o(e,r):e.__proto__=r,e):e}}():void 0)},2140:function(o,t,e){var r=e(8227),n=r("toStringTag"),a={};a[n]="z",o.exports="[object z]"===String(a)},655:function(o,t,e){var r=e(6955),n=String;o.exports=function(o){if("Symbol"===r(o))throw new TypeError("Cannot convert a Symbol value to a string");return n(o)}},4979:function(o,t,e){var r=e(6518),n=e(4576),a=e(7751),i=e(6980),c=e(4913).f,s=e(9297),l=e(679),u=e(3167),k=e(2603),d=e(5002),p=e(6193),v=e(3724),h=e(6395),m="DOMException",E=a("Error"),_=a(m),b=function(){l(this,g);var o=arguments.length,t=k(o<1?void 0:arguments[0]),e=k(o<2?void 0:arguments[1],"Error"),r=new _(t,e),n=new E(t);return n.name=m,c(r,"stack",i(1,p(n.stack,1))),u(r,this,b),r},g=b.prototype=_.prototype,f="stack"in new E(m),L="stack"in new _(1,2),y=_&&v&&Object.getOwnPropertyDescriptor(n,m),S=!!y&&!(y.writable&&y.configurable),R=f&&!S&&!L;r({global:!0,constructor:!0,forced:h||R},{DOMException:R?b:_});var I=a(m),T=I.prototype;if(T.constructor!==I)for(var N in h||c(T,"constructor",i(1,I)),d)if(s(d,N)){var A=d[N],C=A.s;s(I,C)||c(I,C,i(6,A.c))}}}]);
//# sourceMappingURL=414.2842654b.js.map